---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// Get ALL projects
const posts = (await getCollection('blog')).sort(
	(a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
);
---

<Layout>
  <section class="min-h-screen pt-40 px-6 md:px-12 pb-20 bg-void">
    
    <div class="max-w-7xl mx-auto mb-20">
      <h1 class="text-5xl md:text-7xl font-display font-bold text-white">
        ARCHIVE <span class="text-white/20">({posts.length})</span>
      </h1>
      <p class="text-white/50 mt-4 font-mono text-sm uppercase tracking-widest">
        Full production history 2015 â€” 2026
      </p>
    </div>

    <!-- DENSE GRID -->
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16">
      {posts.map((post) => (
        <a href={`/blog/${post.slug}`} class="group block border-t border-white/10 pt-4 hover:border-sunset transition-colors duration-300">
          <div class="flex justify-between items-start mb-4">
             <span class="text-sunset font-mono text-[10px] uppercase tracking-widest">{post.data.date.substring(0, 4)}</span>
             <span class="text-white/30 text-[10px] uppercase tracking-widest group-hover:text-white transition-colors">{post.data.service}</span>
          </div>
          <h2 class="text-3xl font-display font-bold text-white group-hover:translate-x-2 transition-transform duration-300">
            {post.data.client}
          </h2>
          <p class="text-white/50 text-sm mt-2 line-clamp-2 group-hover:text-white/80 transition-colors">
            {post.data.title}
          </p>
        </a>
      ))}
    </div>

  </section>
</Layout>