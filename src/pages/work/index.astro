---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// Get latest 3 projects (regardless of featured status)
const latestProjects = (await getCollection('blog'))
  .sort((a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf())
  .slice(0, 3);

// Define Services Data
const services = [
  { id: '01', title: 'TV Commercials', desc: 'High-end production for broadcast.' },
  { id: '02', title: 'Event Coverage', desc: 'Live streaming & multi-cam setups.' },
  { id: '03', title: 'Corporate Films', desc: 'Brand documentaries & interviews.' },
  { id: '04', title: 'Digital Content', desc: 'Vertical video & social campaigns.' },
  { id: '05', title: 'Motion Design', desc: '2D/3D Animation & VFX.' },
];
---

<Layout>
  <section class="min-h-screen pt-40 px-6 md:px-12 pb-20 bg-void">
    
    <!-- HEADER -->
    <div class="max-w-7xl mx-auto mb-32">
      <h1 class="text-6xl md:text-9xl font-display font-bold text-white mb-6">
        OUR <br />
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-white/40">EXPERTISE.</span>
      </h1>
    </div>

    <!-- SERVICES LIST (Interactive) -->
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-12 gap-12 mb-40 border-t border-white/10">
      <div class="md:col-span-4 pt-8">
        <span class="text-sunset font-mono text-xs uppercase tracking-widest sticky top-32">Services</span>
      </div>
      <div class="md:col-span-8">
        {services.map((service) => (
          <div class="group border-b border-white/10 py-12 transition-all duration-500 hover:pl-10 cursor-default">
            <div class="flex items-baseline gap-6 mb-2">
              <span class="font-mono text-white/30 text-sm">/{service.id}</span>
              <h2 class="text-4xl md:text-6xl font-display font-bold text-white group-hover:text-sunset transition-colors">{service.title}</h2>
            </div>
            <p class="text-white/50 text-lg font-light pl-12 opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform translate-y-2 group-hover:translate-y-0">
              {service.desc}
            </p>
          </div>
        ))}
      </div>
    </div>

    <!-- LATEST WORK PREVIEW -->
    <div class="max-w-7xl mx-auto">
      <div class="flex justify-between items-end mb-12 border-b border-white/10 pb-4">
        <h3 class="text-white font-display text-3xl">Latest Drops</h3>
        <a href="/work/archive" class="text-sunset font-mono text-xs uppercase tracking-widest hover:text-white transition-colors">
          View Full Archive â†—
        </a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {latestProjects.map((post) => (
          <a href={`/blog/${post.slug}`} class="group block">
            <div class="aspect-video bg-slate overflow-hidden mb-4 relative">
               <div class="absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity z-10"></div>
               <!-- Simple Title Placeholder if no image, or reuse the image logic -->
               <div class="w-full h-full flex items-center justify-center text-white/20 font-display text-4xl font-bold bg-[#0a0a0a]">
                  {post.data.client.substring(0,2)}
               </div>
            </div>
            <h4 class="text-white font-bold text-xl group-hover:text-sunset transition-colors">{post.data.client}</h4>
            <span class="text-white/40 text-xs font-mono uppercase">{post.data.service}</span>
          </a>
        ))}
      </div>
    </div>

  </section>
</Layout>